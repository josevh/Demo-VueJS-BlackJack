<!DOCTYPE html>
<html>
<head>
<meta name="description" content="VueJs Blackjack">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>VueJS Blackjack</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="./app.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="app" class="container">
    <div class="row header">
      <div class="col-sm-12 text-center">
        <h1>Blackjack!</h1>
        <hr>
      </div>
    </div>
    <div v-if="!roundStarted" class="row start-game">
      <div class="col-sm-12 text-center">
        <button v-on:click="start" class="btn btn-primary">Start Game</button>
      </div>
    </div><!-- .start-game !roundStarted -->

    <div v-else class="row game-container">
      <div class="col-sm-12">
        <div v-if="!rulesRead" class="row rules">
          <div class="col-sm-10 col-sm-offset-1">
            <div class="row">
              <div class="col-sm-12">
                <h3>Rules</h3>
                <h4>How to Win:</h4>
                <ul>
                  <li>Cards equal <strong>21</strong>, blackjack! You <strong>win</strong>!</li>
                  <li>Whomever has cards whose sum is closest to <strong>21</strong>.</li>
                </ul>
                <h4>How to lose:</h4>
                <ul>
                  <li>Cards equaling more than  means you <strong>lose</strong>.</li>
                </ul>
                <h4>Card Values</h4>
                <table class="table table-compact">
                  <tr>
                    <td>Ace</td>
                    <td>1 or 11</td>
                  </tr>
                  <tr>
                    <td>Face Cards</td>
                    <td>10</td>
                  </tr>
                  <tr>
                    <td>All Other</td>
                    <td>Their respective numbered value</td>
                  </tr>
                </table>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12 text-center">
                <button v-on:click="readRules" class="btn btn-primary">Got it</button>
              </div>
            </div>
          </div>
        </div><!-- .rules !rulesRead -->
        <div v-else class="row game">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-9 text-center round actions">
                <div class="row">
                  <div v-if="roundOver" class="col-sm-12 text-center endgame">
                    <h2>Game Over!</h2>
                    <h3>Winner: {{ lastWinner }}</h3>
                    <button class="btn btn-primary" v-on:click="newRound">Play Again</button>
                  </div><!-- .col.endgame -->
                  <div v-else class="col-sm-12 text-center">
                    <div v-if="cards.player.length === 0">
                      <button v-on:click="playerDrawCard()" class="btn btn-success">Get Cards</button>
                    </div>
                    <div v-else>
                      <button v-on:click="playerDrawCard()" class="btn btn-success">Hit</button>
                      <button v-on:click="endGame" class="btn btn-default">Stay</button>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6 text-center">
                    <h3>Your Score: {{ cardSum(cards.player) }}</h3>
                  </div><!-- .col.player.score -->
                  <div class="col-sm-6 text-center">
                    <h3 v-if="roundOver">Dealer Score: {{ cardSum(cards.dealer) }}</h3>
                    <h3 v-else>Dealer Score: ??</h3>
                  </div><!-- .col.dealer.score -->
                </div>

              </div><!-- .row.round.actions -->
              <div class="col-sm-3">
                <h2>Scores</h2>
                <table class="table">
                    <tr>
                      <th>Player</th>
                      <td>{{ score.player }}</td>  
                    </tr>
                    <tr>
                      <th>Dealer</th>
                      <td>{{ score.dealer }}</td>  
                    </tr>
                    <tr>
                      <th>Draw</th>
                      <td>{{ score.draw }}</td>  
                    </tr>
                </table>
              </div><!-- .col.game.score -->

            </div>

            <hr>

            <div class="row">
              <div class="col-sm-12">

                <div class="row">
                  <div class="col-sm-12">
                    <h3>Your Cards:</h3>
                    <div v-if="cards.player.length > 0" class="row">
                      <div class="col-xs-3 col-sm-2" v-for="card in cards.player">
                        <img class="card" :src="card.image" :alt="card.value + ' of ' + card.suit">
                      </div>
                    </div>
                    <div v-else class="row">
                      <div class="col-xs-3 col-sm-2">
                        <img class="card secret" src="http://via.placeholder.com/226x314/ffffff/000000/&text=%3F" alt="Dealer secret card" style="opacity: 0;">
                      </div>
                    </div>
                  </div>
                </div><!-- .row.player.cards -->

                <hr>

                <div class="row dealer cards">
                  <div class="col-sm-12">
                    <h3>Dealer Cards:</h3>
                    <div v-if="roundOver" class="row">
                      <div class="col-xs-3 col-sm-2" v-for="card in cards.dealer">
                        <img class="card" :src="card.image" :alt="card.value + ' of ' + card.suit">
                      </div>
                    </div>
                    <div v-else class="row">
                      <div v-if="cards.dealer.length > 0" class="col-xs-3 col-sm-2">
                        <img class="card" :src="cards.dealer[0].image" :alt="cards.dealer[0].value + ' of ' + cards.dealer[0].suit">
                      </div>
                      <div class="col-xs-3 col-sm-2">
                        <img class="card secret" src="http://via.placeholder.com/226x314/ffffff/000000/&text=%3F" alt="Dealer secret card">
                      </div>
                    </div>
                  </div>
                </div><!-- .row.dealer.cards -->

              </div>
            </div>

          </div>
        </div><!-- .game !!rulesRead -->
      </div>
    </div><!-- .game-container !!roundStarted -->

  </div><!-- #app -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.3/vue.js"></script>
  <script src="https://code.jquery.com/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="./app.js"></script>
</body>
</html>
